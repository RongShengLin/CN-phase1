<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>
        my webpage
    </title>
    <link rel="icon" href="Image/icon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="Image/icon.ico" type="image/x-icon">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script>
        window.onload = function() {
            var Input = document.getElementById("in");
            var String = document.getElementById("text");
            var but = document.getElementById("post");
            but.onclick = function() {
                if(Input.value) {
                    var time = document.createElement("div");
                    var date = new Date();
                    time.innerHTML = date.toString();
                    String.appendChild(time);

                    var meg = document.createElement("div");
                    meg.innerHTML = Input.value;
	            var m = Input.value;
                    Input.value = "";
                    String.appendChild(meg);
                    var d = date.toString();

                    fetch('./Text/text.txt', {
                            method: 'POST',
                            header: {'Content-Type' : 'text'
                            },
			    body: JSON.stringify({d,m})
                    })
                }
            }
        }
    </script>
</head>
<body>
    <video controls width="1200" height="800" id = "video" src="./Video/video.m3u8" type="application/x-mpegURL"></video>
    <audio controls src="./Audio/audio.m3u8" type="application/x-mpegURL" id="audio"></audio>
    <h1>
        CN project webpage 
    </h1>

    <h2>
        姓名:林榮盛/李奕辰</br>
        學號:b09902117/b09902001</br>
        系級:資工三
    </h2>
    <h2>
        Github
        <a href="https://github.com/RongShengLin">林榮盛</a>
        <a href="https://github.com/Yi-Chen-Lee">李奕辰</a>
    </h2>
    <img src="Image/img.png"
        alt = "test"
        width="320"
       height="320">
    </br>
    </br>
    <div>
    <div id="text">
    </div>
    </br>
    <input id="in" type="text"><button id = "post">send</button>
    </div>

    <iframe id="empty" name="empty" src="about:blank" style="display:none"></iframe>

    <H2>Demo gif</H2>
    <figure>
        <img src="https://i.imgur.com/hAkzFAs.gif">
    </figure>
    <script>
        if(Hls.isSupported()) {
            const video = document.getElementById("video");
            const hls = new Hls();
            hls.loadSource("./Video/video.m3u8");
            hls.attachMedia(video);
            hls.on(Hls.Events.MEDIA_ATTACHED, function() {
                video.muted = true;
                video.play();
            });
        }
        else {
            console.log("not support\n");
        }
    </script>
    </br>
    <script>
	if(Hls.isSupported()) {
	    const audio = document.getElementById("audio");
	    const hls2 = new Hls();
	    hls2.loadSource("./Audio/audio.m3u8");
	    hls2.attachMedia(audio);
	}
    </script>
</body>
